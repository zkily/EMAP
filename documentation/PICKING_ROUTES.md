# PickingåŠŸèƒ½è·¯ç”±å’Œèœå•é…ç½®

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£æè¿°äº†ä¸ºSmart-EMAPç³»ç»Ÿçš„Pickingï¼ˆãƒ”ãƒƒã‚­ãƒ³ã‚°ï¼‰åŠŸèƒ½è‡ªåŠ¨ç”Ÿæˆçš„è·¯ç”±å’Œèœå•é…ç½®ã€‚

## ğŸ›£ï¸ è·¯ç”±é…ç½®

### ä¸»è¦è·¯ç”±

| è·¯ç”±è·¯å¾„                           | ç»„ä»¶åç§°               | é¡µé¢æ ‡é¢˜             | æƒé™              | è§’è‰²                 |
| ---------------------------------- | ---------------------- | -------------------- | ----------------- | -------------------- |
| `/shipping/picking`                | `ShippingPickingHome`  | ãƒ”ãƒƒã‚­ãƒ³ã‚°ç®¡ç†       | `picking:view`    | admin, manager, user |
| `/shipping/picking/list-generator` | `PickingListGenerator` | ãƒ”ãƒƒã‚­ãƒ³ã‚°ãƒªã‚¹ãƒˆç”Ÿæˆ | `picking:create`  | admin, manager, user |
| `/shipping/picking/workspace`      | `PickingWorkspace`     | ãƒ”ãƒƒã‚­ãƒ³ã‚°ä½œæ¥­       | `picking:execute` | admin, manager, user |
| `/shipping/picking/progress`       | `PickingProgress`      | ãƒ”ãƒƒã‚­ãƒ³ã‚°é€²æ—       | `picking:view`    | admin, manager, user |
| `/shipping/picking/history`        | `PickingHistory`       | ãƒ”ãƒƒã‚­ãƒ³ã‚°å±¥æ­´       | `picking:view`    | admin, manager, user |

### è·¯ç”±åˆ†ç»„

æ‰€æœ‰pickingç›¸å…³è·¯ç”±éƒ½å½’å±äº `ãƒ”ãƒƒã‚­ãƒ³ã‚°ç®¡ç†` åˆ†ç»„ï¼Œä¾¿äºç»Ÿä¸€ç®¡ç†å’Œæƒé™æ§åˆ¶ã€‚

## ğŸ¯ èœå•é…ç½®

### èœå•ç»“æ„

```
å‡ºè·ç®¡ç†
â”œâ”€â”€ å‡ºè·ä¸€è¦§
â”œâ”€â”€ ========== ãƒ”ãƒƒã‚­ãƒ³ã‚°ç®¡ç† ==========
â”œâ”€â”€ ãƒ”ãƒƒã‚­ãƒ³ã‚°ç®¡ç† (é¦–é¡µ)
â”œâ”€â”€ ãƒ”ãƒƒã‚­ãƒ³ã‚°ãƒªã‚¹ãƒˆç”Ÿæˆ
â”œâ”€â”€ ãƒ”ãƒƒã‚­ãƒ³ã‚°ä½œæ¥­
â”œâ”€â”€ ãƒ”ãƒƒã‚­ãƒ³ã‚°é€²æ—
â”œâ”€â”€ ãƒ”ãƒƒã‚­ãƒ³ã‚°å±¥æ­´
â”œâ”€â”€ ========== ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ ==========
â”œâ”€â”€ å‡ºè·ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
â””â”€â”€ å‡ºè·KPI
```

### å›¾æ ‡é…ç½®

| èœå•é¡¹               | å›¾æ ‡         | è¯´æ˜                   |
| -------------------- | ------------ | ---------------------- |
| ãƒ”ãƒƒã‚­ãƒ³ã‚°ç®¡ç†       | `Package`    | åŒ…è£…ç›’ï¼Œä»£è¡¨è´§ç‰©ç®¡ç†   |
| ãƒ”ãƒƒã‚­ãƒ³ã‚°ãƒªã‚¹ãƒˆç”Ÿæˆ | `ListChecks` | æ£€æŸ¥æ¸…å•ï¼Œä»£è¡¨ç”Ÿæˆä»»åŠ¡ |
| ãƒ”ãƒƒã‚­ãƒ³ã‚°ä½œæ¥­       | `QrCode`     | äºŒç»´ç ï¼Œä»£è¡¨æ‰«ç ä½œä¸š   |
| ãƒ”ãƒƒã‚­ãƒ³ã‚°é€²æ—       | `BarChart3`  | æŸ±çŠ¶å›¾ï¼Œä»£è¡¨è¿›åº¦ç»Ÿè®¡   |
| ãƒ”ãƒƒã‚­ãƒ³ã‚°å±¥æ­´       | `History`    | å†å²è®°å½•ï¼Œä»£è¡¨å†å²æ•°æ® |

## ğŸŒ å›½é™…åŒ–é…ç½®

### æ—¥æ–‡ (ja.ts)

```typescript
shipping: {
  root: 'å‡ºè·ç®¡ç†',
  list: 'å‡ºè·ä¸€è¦§',
  dashboard: 'å‡ºè·ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰',
  kpi: 'å‡ºè·KPI',
  picking: {
    home: 'ãƒ”ãƒƒã‚­ãƒ³ã‚°ç®¡ç†',
    generator: 'ãƒ”ãƒƒã‚­ãƒ³ã‚°ãƒªã‚¹ãƒˆç”Ÿæˆ',
    workspace: 'ãƒ”ãƒƒã‚­ãƒ³ã‚°ä½œæ¥­',
    progress: 'ãƒ”ãƒƒã‚­ãƒ³ã‚°é€²æ—',
    history: 'ãƒ”ãƒƒã‚­ãƒ³ã‚°å±¥æ­´',
  },
},
```

### ä¸­æ–‡ (zh.ts)

```typescript
shipping: {
  root: 'å‡ºè´§ç®¡ç†',
  list: 'å‡ºè´§æ¸…å•',
  dashboard: 'å‡ºè´§ä»ªè¡¨ç›˜',
  kpi: 'å‡ºè´§KPI',
  picking: {
    home: 'æ‹£è´§ç®¡ç†',
    generator: 'æ‹£è´§æ¸…å•ç”Ÿæˆ',
    workspace: 'æ‹£è´§ä½œä¸š',
    progress: 'æ‹£è´§è¿›åº¦',
    history: 'æ‹£è´§å†å²',
  },
},
```

## ğŸ” æƒé™é…ç½®

### æƒé™ç±»å‹

- `picking:view` - æŸ¥çœ‹æƒé™ï¼ˆæŸ¥çœ‹è¿›åº¦ã€å†å²ç­‰ï¼‰
- `picking:create` - åˆ›å»ºæƒé™ï¼ˆç”Ÿæˆæ‹£è´§æ¸…å•ï¼‰
- `picking:execute` - æ‰§è¡Œæƒé™ï¼ˆæ‰§è¡Œæ‹£è´§ä½œä¸šï¼‰

### è§’è‰²æƒé™

| è§’è‰²      | æƒé™èŒƒå›´                  |
| --------- | ------------------------- |
| `admin`   | æ‰€æœ‰pickingåŠŸèƒ½çš„å®Œæ•´æƒé™ |
| `manager` | æ‰€æœ‰pickingåŠŸèƒ½çš„å®Œæ•´æƒé™ |
| `user`    | æ‰€æœ‰pickingåŠŸèƒ½çš„å®Œæ•´æƒé™ |
| `guest`   | æ— pickingåŠŸèƒ½æƒé™         |

## ğŸ“ æ–‡ä»¶ç»“æ„

```
frontend/src/
â”œâ”€â”€ router/modules/
â”‚   â””â”€â”€ shipping.ts          # å‡ºè·ç®¡ç†è·¯ç”±é…ç½®
â”œâ”€â”€ constants/
â”‚   â””â”€â”€ menuList.ts          # èœå•é…ç½®
â”œâ”€â”€ locales/
â”‚   â”œâ”€â”€ ja.ts               # æ—¥æ–‡å›½é™…åŒ–
â”‚   â””â”€â”€ zh.ts               # ä¸­æ–‡å›½é™…åŒ–
â”œâ”€â”€ views/Shipping/
â”‚   â”œâ”€â”€ ShippingPickingHome.vue
â”‚   â””â”€â”€ components/
â”‚       â”œâ”€â”€ PickingListGenerator.vue
â”‚       â”œâ”€â”€ PickingWorkspace.vue
â”‚       â”œâ”€â”€ PickingProgress.vue
â”‚       â””â”€â”€ PickingHistory.vue
â””â”€â”€ utils/
    â””â”€â”€ routeGenerator.ts    # è·¯ç”±ç”Ÿæˆå·¥å…·
```

## ğŸ”§ ä½¿ç”¨æ–¹æ³•

### 1. è®¿é—®PickingåŠŸèƒ½

ç”¨æˆ·å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è®¿é—®PickingåŠŸèƒ½ï¼š

1. **ä¾§è¾¹æ èœå•**: å‡ºè·ç®¡ç† â†’ ãƒ”ãƒƒã‚­ãƒ³ã‚°ç®¡ç†ç›¸å…³èœå•é¡¹
2. **ç›´æ¥URLè®¿é—®**: `/shipping/picking/*`
3. **ç¨‹åºå†…è·³è½¬**: ä½¿ç”¨`router.push()`æ–¹æ³•

### 2. æƒé™éªŒè¯

ç³»ç»Ÿä¼šè‡ªåŠ¨éªŒè¯ç”¨æˆ·æƒé™ï¼š

```typescript
// è·¯ç”±å®ˆå«ä¼šæ£€æŸ¥ç”¨æˆ·è§’è‰²
if (Array.isArray(to.meta?.roles) && !to.meta.roles.includes(role)) {
  ElMessage.error("ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“");
  next("/403");
}
```

### 3. èœå•æ˜¾ç¤º

ä¾§è¾¹æ ç»„ä»¶ä¼šæ ¹æ®ç”¨æˆ·è§’è‰²è‡ªåŠ¨è¿‡æ»¤æ˜¾ç¤ºçš„èœå•é¡¹ï¼š

```typescript
const filteredMenu = computed(() => {
  return menuList.filter((item) => item.roles.includes(userRole.value));
});
```

## ğŸ§ª æµ‹è¯•éªŒè¯

è¿è¡ŒéªŒè¯è„šæœ¬æ£€æŸ¥é…ç½®æ­£ç¡®æ€§ï¼š

```bash
# åœ¨frontendç›®å½•ä¸‹è¿è¡Œ
npm run type-check
```

æˆ–è€…ä½¿ç”¨æˆ‘ä»¬åˆ›å»ºçš„éªŒè¯è„šæœ¬ï¼š

```typescript
// åœ¨æµè§ˆå™¨æ§åˆ¶å°è¿è¡Œ
import("./scripts/validateRoutes.ts");
```

## ğŸ“ ç»´æŠ¤è¯´æ˜

### æ·»åŠ æ–°çš„Pickingå­åŠŸèƒ½

1. **æ·»åŠ è·¯ç”±**ï¼šåœ¨ `frontend/src/router/modules/shipping.ts` ä¸­æ·»åŠ æ–°è·¯ç”±
2. **æ·»åŠ èœå•**ï¼šåœ¨ `frontend/src/constants/menuList.ts` ä¸­æ·»åŠ èœå•é¡¹
3. **æ·»åŠ å›½é™…åŒ–**ï¼šåœ¨ `frontend/src/locales/` ä¸­æ·»åŠ ç¿»è¯‘
4. **åˆ›å»ºç»„ä»¶**ï¼šåœ¨ `frontend/src/views/Shipping/components/` ä¸­åˆ›å»ºæ–°ç»„ä»¶

### ä¿®æ”¹æƒé™é…ç½®

1. åœ¨è·¯ç”±çš„ `meta.permission` ä¸­å®šä¹‰æ–°æƒé™
2. åœ¨åç«¯æƒé™ç³»ç»Ÿä¸­é…ç½®å¯¹åº”æƒé™
3. æ›´æ–°è§’è‰²æƒé™æ˜ å°„å…³ç³»

## ğŸš€ è‡ªåŠ¨åŒ–ç‰¹æ€§

æœ¬é…ç½®æ”¯æŒä»¥ä¸‹è‡ªåŠ¨åŒ–ç‰¹æ€§ï¼š

1. **è‡ªåŠ¨æƒé™éªŒè¯**ï¼šè·¯ç”±å®ˆå«è‡ªåŠ¨æ£€æŸ¥ç”¨æˆ·æƒé™
2. **è‡ªåŠ¨èœå•è¿‡æ»¤**ï¼šæ ¹æ®ç”¨æˆ·è§’è‰²è‡ªåŠ¨æ˜¾ç¤º/éšè—èœå•
3. **è‡ªåŠ¨å›½é™…åŒ–**ï¼šæ”¯æŒä¸­æ—¥æ–‡è‡ªåŠ¨åˆ‡æ¢
4. **è‡ªåŠ¨å›¾æ ‡æ¸²æŸ“**ï¼šèœå•å’Œè·¯ç”±è‡ªåŠ¨æ˜¾ç¤ºå¯¹åº”å›¾æ ‡
5. **è‡ªåŠ¨é¢åŒ…å±‘**ï¼šæ ¹æ®è·¯ç”±å±‚çº§è‡ªåŠ¨ç”Ÿæˆå¯¼èˆªé¢åŒ…å±‘

## âœ… é…ç½®å®Œæˆæ¸…å•

- [x] è·¯ç”±é…ç½® (`frontend/src/router/modules/shipping.ts`)
- [x] èœå•é…ç½® (`frontend/src/constants/menuList.ts`)
- [x] æ—¥æ–‡å›½é™…åŒ– (`frontend/src/locales/ja.ts`)
- [x] ä¸­æ–‡å›½é™…åŒ– (`frontend/src/locales/zh.ts`)
- [x] æƒé™é…ç½® (è·¯ç”±metaä¸­çš„roleså’Œpermission)
- [x] å›¾æ ‡é…ç½® (Lucideå›¾æ ‡é›†æˆ)
- [x] è·¯ç”±éªŒè¯å·¥å…· (`frontend/src/utils/routeGenerator.ts`)
- [x] æµ‹è¯•è„šæœ¬ (`frontend/src/scripts/validateRoutes.ts`)

æ‰€æœ‰pickingåŠŸèƒ½çš„å‰ç«¯è·¯ç”±å’Œèœå•é…ç½®å·²è‡ªåŠ¨ç”Ÿæˆå¹¶é›†æˆåˆ°ç³»ç»Ÿä¸­ï¼ğŸ‰
